<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<title>Galois Math Editor</title>
	<link rel="stylesheet" href="mathlive/dist/mathlive.core.css" type="text/css">
	<link rel="stylesheet" href="mathlive/dist/mathlive.css" type="text/css">
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="styles/styles.css" type="text/css">
	<script type="text/javascript">	
/*
		$(document).ready(function() {
		    //Reverse wheel direction
			document.querySelector('.history-container').addEventListener('wheel', function(e) {
			  if(e.deltaY) {
			    e.preventDefault();
			    e.currentTarget.scrollTop -= parseFloat(getComputedStyle(e.currentTarget).getPropertyValue('font-size')) * (e.deltaY < 0 ? -1 : 1) * 2;
			  }
			});
		});
*/
	</script>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script src="mathlive/dist/mathlive.js"></script>
	<script src="data/example01.js"></script>
	<script src="data/example02.js"></script>
	<script type="text/javascript">	
		$(function(){
				"use strict";
				var spokens = [];
				function changeButtonStates(){
					if($("#speechbutton").prop("disabled"))
						$("#speechbutton").prop("disabled", false);
					else
						$("#speechbutton").prop("disabled", true);
					if($("#stopbutton").prop("disabled"))
						$("#stopbutton").prop("disabled", false);
					else
						$("#stopbutton").prop("disabled", true);
				}
				$("#speechbutton").click(function(evt){
					changeButtonStates();
					recognition.start();
					$("#indicator").text("Speak, please!");
				});
				$("#stopbutton").click(function(evt){
					changeButtonStates();
					recognition.stop();
					$("#indicator").text("Not listening");
				});
				var recognition = new webkitSpeechRecognition();
				recognition.interimResults = false;
				recognition.continuous = true;
				var text = $("#mathAnnotation");
				recognition.onresult = function(event) {
					var res = [];
					for(var i= event.resultIndex; i<event.results.length; i++)
						res.push(event.results[i][0].transcript);
					var utterance = res+"";
					text.append(utterance);
					$("#indicator-sr").text(utterance);
					spokens = spokens.concat(res);
				};
				$("#undobutton").click(function(event){
					if(!spokens.length){
						$("#indicator").text("Can't undo");
						return;
					}
					var remove = spokens.pop();
					var utterance = spokens+"";
					text.text(utterance);
					$("#indicator").text("Removed "+remove);
				});
				$("#clearbutton").click(function(event){
					if(!confirm("Are you sure you want to delete everything you said? This cannot be undone.")){
						return;
					}
					spokens = [];
					text.text("");
					$("#indicator").text("Everything you said was just deleted.");
				});
			});
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		$(document).ready(function() {

		    //OPEN AND POPULATE MODAL WITH EQUATION
		    function StartProblem(example) {
			    clearProblem();
			    var html = "";
				for (var i = 0; i < example[0].steps.length; i++) {			      
			      html += '<div class="row mathStep">';
			      
			      if(i==0) {
				       html +=  '<div class="col-md-1">Original</div>';
			      }else {
				       html +=  '<div class="col-md-1">Step '+i+':</div>';
			      }
			      html +=  '<div class="col-md-4 staticMath">$$'+example[0].steps[i].equation+'$$</div>';
			      html +=  '<div class="col-md-5">'+example[0].steps[i].annotation+'</div>';
			      html +=  '<div class="col-md-2" style="text-align: right;"><button class="btn btn-sm btn-default">Delete</button></div>';
			      html += '</div>';
			    }
			    $('.mathHistory').html(html);
				MathLive.renderMathInDocument();
				$('#MathEditorModal').modal();
		    	
	    	}
	    	
	    	//CCLEAR ALL VALUES FROM THE MODAL
	    	function clearProblem() {
		    	$('.mathHistory').empty();
	    	}
	    	
	    	// WIRE UP EXAMPLE BUTTONS ON HOME PAGE
		    $('#example01').click(function() {
			    StartProblem(example01);
			});
			
			$('#example02').click(function() {
			    StartProblem(example02);
			});
			
			$('#example03').click(function() {
			    StartProblem(example03);
			});
		    
		    
		});
	</script>
	<script src="scripts/scripts.js"></script>
</head>

<body lang=EN-US>
	
	<!-- BEGIN TOP HEADER/NAVIGATION -->
	<header>
	<nav class="navbar navbar-default" id="topNavigation">
	  <div class="container-fluid">
	    <!-- Brand and toggle get grouped for better mobile display -->
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand" href="trial03.html">
		      <img src="" alt="Galois Math Editor Logo" height="37">
	      </a>
	    </div>
	    <!-- Collect the nav links, forms, and other content for toggling -->
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	      <ul class="nav navbar-nav navbar-right">
	        <li><a href="mailto:info@diagramcenter.org">Contact Us</a></li>
	      </ul>
	    </div><!-- /.navbar-collapse -->
	  </div><!-- /.container-fluid -->
	</nav>
	</header>
	<!-- END TOP HEADER/NAVIGATION -->
		<div class="row" style="width: 1000px; margin: 0px auto; margin-top: 150px;">
			<div class="col-md-12 text-center">
				<h2>Click an example below to try out the new Galois math editor!</h2>
				<br/><br/>
			</div>
		</div>
		<div class="row" style="width: 1000px; margin: 0px auto;">
			<div class="col-md-4 text-center">
				<button class="btn btn-default btn-huge" id="example01">Example 1</button>
			</div>
			<div class="col-md-4 text-center">
				<button class="btn btn-default btn-huge" id="example02">Example 2</button>
			</div>
			<div class="col-md-4 text-center">
				<button class="btn btn-default btn-huge" id="example03">Example 3</button>
			</div>
		</div>
	
	
	
	
	
	
	
	
	

<!-- START MODAL CODE -->
<div class="modal fade" tabindex="-1" role="dialog" id="MathEditorModal">
  <div class="modal-dialog modal-lg" role="document" style="width: 1000px">
    <div class="modal-content">
      
      
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Modal title</h4>
      </div>
      
      
      <div class="modal-body">
		  <div class="mathHistory container-fluid" style="height: 300px; overflow-y: scroll;">
			 <!-- Equation History Here --> 
		  </div>
	  
		  <div class="mathWorkArea" style="height: 205px; ">
			<div class="row" style="border-top: 10px solid #222F3F; border-bottom: 3px solid #222F3F; margin-top: 5px;">
				<div class="col-md-6">
					<div class="mathStepTitle" style="color:#222F3F; margin-top: 13px;">Current</div>
					<div class="mathEditor" id='mathEditorActive'> x = -2</div>
				</div>
				<div class="col-md-6">
					<div class="mathAnnotation">
						<div class="row" style="margin: 5px 0px 5px 0px;">
							<div class="col-md-7"> 
								<label>Describe your work</label>   
							</div>    
							<div class="col-md-5 pull right"> 
								<button  id="speechbutton">Speak</button>
								<button  disabled="true" id="stopbutton">Stop</button>
								<!-- <button  id="undobutton">delete last line</button> -->
								<button  id="clearbutton">Delete</button>   
							</div>    
						</div>    
						<div class="row" style="margin-bottom: 5px;">
							<div class="col-md-12"> 
								 <textarea class="form-control" rows="2" id="mathAnnotation">Final answer. You can delete this and previous steps and re-derive to play with Galois.</textarea> 
							</div>
						</div>   
					</div>
				</div>
			</div>
		    <div class="row" style=" padding-top: 7px;">
			  <div class="col-md-7">
				  <div class="mathPalette">
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\cdot$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\times$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\div$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\pm$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\enclose{updiagonalstrike downdiagonalstrike}[2px solid red]{\blacksquare}$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\frac{\blacksquare}{\square}$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$${\blacksquare}^{\square}$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$${\blacksquare}_{\square}$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\sqrt{\blacksquare}$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\sqrt[{\square}]{\blacksquare}$$</button>
					  <br/>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\leq$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\geq$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\neq$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\overset{?}{=}$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$ \enclose{updiagonalstrike downdiagonalstrike}[2px solid red]{\blacksquare}^\square $$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\Bigl{(}\blacksquare\Bigr{)}$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\Bigl{[}\blacksquare\Bigr{]}$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\Bigl{|}\blacksquare\Bigr{|}$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\Bigl{\lfloor}\blacksquare\Bigr{\rfloor}$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\Bigl{\lceil}\blacksquare\Bigr{\rceil}$$</button>
				   </div>
			   </div>
			   <div class="col-md-4">
				   <div class="mathPalette">
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\triangle$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\angle$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\cong$$</button>
					  <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\perp$$</button>
				      <button class="staticMath btn btn-default paletteButton" onclick="MathLivePasteFromButton(this)">$$\parallel$$</button>
				   </div>
			   </div>
		    </div>
		  </div>     
      </div>    
      <div class="modal-footer" style="text-align: left;">
        <button class="btn btn-default" onclick="NewMathEditorRow(CleanUpCrossouts(TheActiveMathField.latex()))">Cleanup Crossouts</button>
	    <button class="btn btn-default" onclick="DeleteActiveMath()">Delete Current Step</button>
	    <button class="btn btn-default" onclick="NewMathEditorRow(TheActiveMathField.latex())">Copy Step</button>
	    <button class="btn btn-default" onclick="NewMathEditorRow(CleanUpCrossouts(TheActiveMathField.latex())); NewMathEditorRow(CleanUpCrossouts(TheActiveMathField.latex()));">Cleanup & Copy Step</button>
	    <button class="btn btn-primary pull-right" data-dismiss="modal">Done</button>
      </div>

    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- END MODAL CODE -->




<script>
		   
	
	
	
	
	
	
</script>
</body>

<!-- MATHLIVE INITIALIZATION RENDER SCRIPT -->
<script>
	MathLive.renderMathInDocument();
	TheActiveMathField = MathLive.makeMathField(
		document.getElementById('mathEditorActive'),
	  	{commandbarToggle: 'hidden',
		 overrideDefaultInlineShortcuts: false,
         onSelectionDidChange: UpdatePalette
		}
	);
</script>

<!-- END MATHLIVE INITIALIZATION RENDER SCRIPT -->

</html>
